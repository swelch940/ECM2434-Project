<html>
<head>
	<title> Tree Stats </title>
</head>
{% load static %}
<link rel ="stylesheet" href="{%static '/home/treestats.css'%}">
<body>
    <div class = "banner">
        <nav>
            <img src= "{%static '/home/images/transparent.png'%}" class = "logo">
            <ul>
                <li><a href="/tree">My Tree</a></li>
                <li><a href="/map">Map</a></li>
                <li><a href="/leaderboard">Leaderboard</a></li>
                <li><a href="/home">Logout</a></li>
            </ul>
            <img src = "{%static '/home/images/transparent.png'%}" class = "logo">
        </nav>
    </div>
    <div class = "block">
        <div class = "box">
            <p class="number">
                <span class="num">70</span>
                <span class="sub">%</span>
            </p>
            <p class = "title">Oxygen</p>
        </div>
        <span class = "dots"></span>
        <svg class = "svg">
            <defs>
                <linearGradient id = "gradientStyle">
                    <stop offset="0%" stop-color="#565656" />
                    <stop offset="100%" stop-color="#b7b5b5"/>
                </linearGradient>
            </defs>
            <circle class="circle" cx="90" cy="90" r = "80" />
        </svg>
    </div>
    <div class = "block">
        <div class = "box">
            <p class="number">
                <span class="num">50</span>
                <span class="sub">%</span>
            </p>
            <p class = "title">Water</p>
        </div>
        <span class = "dots"></span>
        <svg class = "svg">
            <circle class="circle" cx="90" cy="90" r = "80" />
        </svg>
    </div>
    <script>
        const block = document.querySelectorAll('.block');
        window.addEventListener('load', function(){
            block.forEach(item => {
                let numElement = item.querySelector('.num');
                let num = parseInt(numElement.innerText);
                let count = 0;
                let time = 1500 / num;
                let circle = item.querySelector('.circle');

                setInterval(() => {
                    if(count == num) {
                        clearInterval();
                    } else {
                        count +=1;
                        numElement.innerText = count;
                    }

                }, time)

                circle.style.strokeDashoffset 
                = 503 - (503 *(num / 100 ));

                let dots = item.querySelector('.dots');
                dots.style.transform = `rotate(${360 * (num / 100)}deg)`;
            })
        });
    </script>
</body>
</html>